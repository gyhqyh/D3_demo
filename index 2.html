<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>test</title>
    <style>
        .d1 {
            width: 300px;
            height: 300px;
            padding: 20px;
            border: 1px solid grey;
        }
    </style>
</head>
<body>
    <div class='d1'>
        <svg xmlns='http://www.w3.org/2000/svg' width='100%' height='100%'>
<!--
            <line x1='50' y1='50' x2='100' y2='100' stroke='red'>
            </line>
            <polyline points='50 50 100 50 100 100 50 100' fill='none' stroke='red' stroke-width='3'>
            </polyline>
            <polygon points='150,150 200, 150 200, 200' fill='red'>
            </polygon>
            -->
<!--
            <path d='M20,20 L40,40 L80,50 Z M120, 120 L130,130' stroke='red' stroke-width='2' fill='none'></path>
            <path d='M150,150 H200, V200 Z' fill='none'></path>
            -->
            <path d='M200,200 A100,100,0,0,1,250,250' stroke='red' stroke-width='2' fill='none'></path>
        </svg>
    </div>
    <div class='d1' id='d2'>

    </div>
    
</body>
<script>
    window.onload = function () {
        let svgNs = 'http://www.w3.org/2000/svg';
        let parentE = document.getElementById('d2'); 
        let createTag = function (tag, objAttr) {
            let oTag = document.createElementNS(svgNs, tag);
            for(let i in objAttr) {
                oTag.setAttribute(i, objAttr[i])
            }
            return oTag;
        }
        let svgE = createTag('svg', {height: '100%', width: '100%', xmlns: svgNs})
        parentE.appendChild(svgE);
        let polylineE = null;
        let polylineEpoints = null;
        svgE.onmousedown = function (event) {
            let svgX = event.offsetX;
            let svgY = event.offsetY;
            console.log('down')
            if (!polylineE) {
                polylineE = createTag('polyline', {fill: 'none', stroke: 'red', 'stroke-width': '2'})
                this.appendChild(polylineE);
            }
            polylineEpoints = polylineE.getAttribute('points');
            let pointsAttr = (polylineEpoints || '') + svgX + ',' + svgY + ' '
            polylineE.setAttribute('points', pointsAttr);
            let circleE = createTag('circle', {cx: svgX, cy: svgY, r: '10', fill: '#fff', stroke: 'red', 'stroke-width': '1'});
            this.appendChild(circleE);
        }
        svgE.onmousemove = function (event) {
            let svgX = event.offsetX;
            let svgY = event.offsetY;
            if (polylineEpoints) {
                polylineE.setAttribute('points', polylineEpoints + svgX + ',' + svgY + ' ')
            }
        }
        svgE.oncontextmenu = function () {
            svgE.onmousemove = null;
            return false;
        }
    }
</script>
<script src="https://cdn.bootcss.com/d3/4.13.0/d3.js"></script>
</html>